## Techs & Terms

* [Premature Optimization](#premature_optimization)
* [WebAssembly](#web-assembly)
* [HTTP/2](#http/2)
* [JWT](#jwt)

### premature_optimization
Any coding practice that makes your code harder to understand in the name of performance is a `premature optimization`.

### web-assembly
* It's a new kind of code that can be compiled (ahead of time) down into a binary format that browsers can read. This means that high-level languages (C, C++) can be compiled down into a format that is legible to the browser. For developers that want to do some heavy computing on the web, this is a huge plus.
* At the time of writing, it does not support `DOM access` - so JS is still needed.

### HTTP/2
* Multiplexing
  * With HTTP/1.1, you can only download one resource at time. When your site needs two resources `a.css` and `b.js`, a needs to be downloaded first
    before connection to download b can be established. It is really inefficient since client and server don't do too much.
  * To mitigate this, browsers allow for opening multiple connections (typically 6-8) to download them simultaneously. But there is cost involved - setup/manage multiple connections which impact both client and browser.
  * With HTTP/2, it allows you to send off multiple requests on the **same** connection. The requested resources are fetched in parallel and received
    **in any order**.
  * Note, HTTP/1.1 has a concept of `pipelining` which also allows multiple requests to be sent off at once but they need to be returned **in the order they were requested**. This feature is nowhere near as good as HTTP/2 so it is hardly used.

### JWT

#### Basics

* JWT is comprised of 3 parts - **xxxx.yyyyy.zzzz** = **header**.**payload(claim)**.**signature**
* header is as follow. It shows the algorithm we use to generate the signature. It needs to be base64 encoded.
```js
{
  "typ": "JWT",
  "alg": "HS256"
}
```
* payload(claim) contains metadata as follow. It then base64 encoded.
```js
{
  "iss": "Mr He. JWT", // issuer
  "iat": 1441593502, // issued at
  "exp": 1441594722, // expire at
  "aud": "www.lendi.com.au", // audience - server
  "sub": "david.he@lendi.com" // subject - client
}
```
* signature is generated by joining the above two base64 encoded strings first and then encrypted with secret - 'I love this game'.
```js
signature = header_alg(xxxxxxx.yyyyyyyy, YOUR_SECRET)
```

#### Key Notes

* Never ever put the senstive data in **header** and **payload** - they are encoded not encrypted!!!
* Why do we need signature? - It prevents somebody modifying the data.
* How does server do the authentication? - Server will use the specified algorithm in the header, secret stored on the server, **header** and **payload** to generate another signature. Then, server will do the comparison with the sent one if they don't match it indicates the token has been tampered with.
